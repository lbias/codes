<script language="javascript" type="text/javascript">

String.prototype.lengthB = function( )
{
    // 获取并返回指定字符串的字节数，扩展String对象方法
    var b = 0, l = this.length;
    // 初始化字节数递加变量，并获取字符串参数的字符个数
    if( l )
    {
        // 如果存在字符串，则执行计算
        for( var i = 0; i < l; i ++ )
        {
            var c = this.charAt( i );
            // 获取当前字符
            if ( escape( c ).length > 4 )
            {
                // 如果字符的转义序列大于4位，说明是双字节
                b += 2;
            }
            else if( c != "\r" )
            {
                b ++ ;
            }
        }

        return b;
        // 返回字节数
    }
    else
    {
        return 0;
        // 如果参数为空，则返回0个
    }
}


var s = "String对象长度";
// 定义字符串直接量
alert(s.lengthB())	// 返回14

</script>
